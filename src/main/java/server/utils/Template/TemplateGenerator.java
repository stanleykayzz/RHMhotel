package server.utils.Template;

import server.model.RoomCategory;

import java.text.SimpleDateFormat;
import java.util.*;

public class TemplateGenerator {
    private String patternDateForPdf = "dd/MM/yyyy";
    private String dateInString = new SimpleDateFormat(patternDateForPdf).format(new Date());

    public TemplateGenerator() {
    }

    public String getProfessionnalInvoiceForMail(String bookingNum, String facturationDate, String clientFullName, String clientAddress, String clientCity, String clientCountry, List<RoomCategory> listCateg) {

        String invoice;
        String up = "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head> <title>THANK YOU</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0 \"> <meta name=\"format-detection\" content=\"telephone=no\"> <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800\" rel=\"stylesheet\"> <style type=\"text/css\"> body{-webkit-text-size-adjust: 100% !important; -ms-text-size-adjust: 100% !important; -webkit-font-smoothing: antialiased !important;}img{border: 0 !important; outline: none !important;}p{Margin: 0px !important; Padding: 0px !important;}table{border-collapse: collapse; mso-table-lspace: 0px; mso-table-rspace: 0px;}td, a, span{border-collapse: collapse; mso-line-height-rule: exactly;}.ExternalClass *{line-height: 100%;}span.MsoHyperlink{mso-style-priority: 99; color: inherit;}span.MsoHyperlinkFollowed{mso-style-priority: 99; color: inherit;}.auto-style1{color: #33CC33;}.auto-style2{height: 157px;}.auto-style3{height: 99px;}.auto-style4{width: 100%;}.auto-style5{font-family: \"Open Sans\", Arial, sans-serif; font-size: 17px; color: #30373B;}.auto-style6{height: 154px; width: 93%;}.auto-style7{font-family: \"Open Sans\", Arial, sans-serif; font-size: 16px; color: #30373B;}</style> <style media=\"only screen and (min-width:481px) and (max-width:599px)\" type=\"text/css\"> @media only screen and (min-width:481px) and (max-width:599px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_height]{height: 20px !important;}td[class=em_space]{width: 10px !important;}td[class=em_width55]{width: 80px !important; text-align: center !important;}td[class=em_width75]{width: 100px !important;}td[class=em_font]{font-size: 14px !important;}td[class=em_font2]{text-align: center !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style> <style media=\"only screen and (max-width:480px)\" type=\"text/css\"> @media only screen and (max-width:480px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide], span[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_height]{height: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_font]{font-size: 14px !important; line-height: 28px !important;}td[class=em_font1]{font-size: 14px !important; line-height: 18px !important;}td[class=em_font2]{font-size: 14px !important; line-height: 18px !important; text-align: center !important;}td[class=em_space]{width: 10px !important;}span[class=em_br]{display: block !important;}td[class=em_width55]{width: 55px !important; font-size: 15px !important; line-height: 19px !important; text-align: center !important;}td[class=em_width75]{width: 75px !important; font-size: 15px !important; line-height: 19px !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style></head><body style=\"margin:0px; padding:0px;\" bgcolor=\"#ffffff\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#ffffff\"> <tbody><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#ffffff\"> <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"40\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:none;\"><img src=\"https://residencedeshautsdemenaye.fr/img/logoRHM.png\" width=\"390\" height=\"283\" style=\"display:block;font-family: Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; font-weight:bold;\" border=\"0\" alt=\"LoGo Here\"></a></td></tr><tr> <td height=\"30\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; text-transform:uppercase; font-weight:bold;\" class=\"em_font\"> <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">HOTEL</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">RESTAURANT</a> <span class=\"em_hide\"> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; </span> <span class=\"em_br\"> </span><a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">EVENTS</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">CONTACTEZ-NOUS</a> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"50\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"middle\" align=\"center\"><h1>Vous avez une nouvelle réservation</h1></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:18px; font-weight:bold; line-height:22px; color:#33cc33; text-transform:uppercase;\">Pour votre réservation!</td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:22px; font-weight:bold; color:#30373b; text-transform:uppercase;\">Votre facture</td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"left\" class=\"em_wrapper\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Numéro de réservation</span> " + bookingNum + " </td></tr></tbody></table> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"right\" class=\"em_wrapper\"> <tbody><tr> <td valign=\"top\" class=\"em_pad_top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Date de facturation</span> " + facturationDate + " </td></tr></tbody></table> </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Client : &nbsp;<span style=\" color:#30373b;\">" + clientFullName + "</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"em_font2\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:20px; color:#30373b;\"> " + clientAddress + " , " + clientCity + ", " + clientCountry + "  </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td width=\"30\" class=\"em_hide\">&nbsp;</td><td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Chambres</td><td width=\"5\"></td><td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Quantité</td><td width=\"138\" class=\"em_hide\"></td><td width=\"5\"></td><td align=\"right\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#eaebeb\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr>";

        String row = "<tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td width=\"30\" class=\"em_hide\">&nbsp;</td><td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomType</td><td width=\"5\"></td><td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomCount</td><td width=\"138\" class=\"em_hide\"></td><td width=\"5\"></td><td align=\"right\" valign=\"top\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomTotalPrice</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr>";

        String down = "<tr> <td height=\"8\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"9\" class=\"em_hide\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#feae39\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"15\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td align=\"right\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:20px; line-height:24px; color:#30373b; font-weight:bold;\">Total: &nbsp;&nbsp; $Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"28\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:16px; line-height:22px; color:#30373b;\"> Feel free to review your invoice below or click the<br class=\"em_hide\"> button to view your account. </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> <table width=\"210\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td valign=\"middle\" align=\"center\" height=\"45\" bgcolor=\"#33cc33\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#ffffff; text-transform:uppercase;\"><a href=\"#\" target=\"_blank\" style=\"line-height:45px; display:block; color:#ffffff; text-decoration:none;\">My account</a></td></tr></tbody></table> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"middle\" align=\"center\" class=\"auto-style1\"> <h1><strong>Informations pour les professionnel</strong>s</h1> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"line-height:22px; \" class=\"auto-style8\">La Résidence des Hauts de Menaye est à l'écoute de vos moindre besoin, n'hésitez pas à nous contacter pour la moindre information ou remarque.</td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Information : &nbsp;<span style=\" color:#30373b;\">Une connexion internet</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0q272_RLW9q4WhkbqMlgTGLdCFUfPNHVhzvi2w9FNY9BZh-RhSAHxdQ\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \"> La Résidence des Hauts de Menaye est équipé de connexion Wi-Fi accessible dans tout l'hôtel. Vous pouvez donc vous présenter à l'accueil pour demander à avoir accès au Wi-fi. </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Information : &nbsp;<span style=\" color:#30373b;\">Vos déplacements</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"http://images.clipartlogo.com/files/images/17/174558/aiga-ground-transportation-bg_t\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \">Si vous souhaitez vous déplacer, seul ou en groupe, la Résidence des Hauts de Menaye pourra mettre à votre disposition un taxi ou un bus pour assurer vos déplacements dans la ville.</td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td align=\"center\" style=\"line-height:22px; \" class=\"auto-style7\">En cas de déplacements importants, nous vous conseillons de contacter l'hôtel à l'avance et de préciser le nombre de personnes qui se dépalceront avec vous afin que nous puissions prendre nos dispositions.</td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> <table width=\"210\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td valign=\"middle\" align=\"center\" height=\"45\" bgcolor=\"#feae39\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#ffffff; text-transform:uppercase;\">CONTACT</td></tr></tbody></table> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#30373b\" class=\"em_aside\"> <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:12px; line-height:18px; color:#848789;text-transform:uppercase;\"> If you do not wish to receive any further emails from us, please <span style=\"text-decoration:underline;\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:underline; color:#848789;\">unsubscribe</a></span> </td></tr><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> <div style=\"display:none; white-space:nowrap; font:20px courier; color:#ffffff; background-color:#ffffff;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div></body></html>";

        Set setA = new HashSet();
        double totalCount = 0;
        //ici on ajoute les infos de chambre*
        for (RoomCategory b : listCateg) {
            String roomName = b.getName();
            double priceNight = b.getPrice();
            Long roomId = b.getId();
            int quantity = getOccurrenceRoomBooking(roomId, listCateg);
            String toAdd = row;
            double total = quantity * priceNight;
            toAdd = replaceValueInText(toAdd, "roomType", roomName)
                    .replace("roomCount", "" + quantity)
                    .replace("roomTotalPrice", "" + total);
            setA.add(toAdd);
            totalCount = totalCount + total;
        }
        invoice = up + setA.toString() + down;
        invoice = formatInvoice(invoice,totalCount);
        return invoice;
    }

    public String getInvoiceHobbyForMail(String bookingNum, String facturationDate, String clientFullName, String clientAddress, String clientCity, String clientCountry,List<RoomCategory> list) {

        String up = "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head> <title>THANK YOU</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0 \"> <meta name=\"format-detection\" content=\"telephone=no\"> <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800\" rel=\"stylesheet\"> <style type=\"text/css\"> body{-webkit-text-size-adjust: 100% !important; -ms-text-size-adjust: 100% !important; -webkit-font-smoothing: antialiased !important;}img{border: 0 !important; outline: none !important;}p{Margin: 0px !important; Padding: 0px !important;}table{border-collapse: collapse; mso-table-lspace: 0px; mso-table-rspace: 0px;}td, a, span{border-collapse: collapse; mso-line-height-rule: exactly;}.ExternalClass *{line-height: 100%;}span.MsoHyperlink{mso-style-priority: 99; color: inherit;}span.MsoHyperlinkFollowed{mso-style-priority: 99; color: inherit;}.auto-style1{color: #33CC33;}.auto-style2{height: 157px;}.auto-style3{height: 99px;}.auto-style4{width: 100%;}.auto-style5{font-family: \"Open Sans\", Arial, sans-serif; font-size: 17px; color: #30373B;}.auto-style6{height: 154px; width: 93%;}.auto-style7{font-family: \"Open Sans\", Arial, sans-serif; font-size: 16px; color: #30373B;}</style> <style media=\"only screen and (min-width:481px) and (max-width:599px)\" type=\"text/css\"> @media only screen and (min-width:481px) and (max-width:599px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_height]{height: 20px !important;}td[class=em_space]{width: 10px !important;}td[class=em_width55]{width: 80px !important; text-align: center !important;}td[class=em_width75]{width: 100px !important;}td[class=em_font]{font-size: 14px !important;}td[class=em_font2]{text-align: center !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style> <style media=\"only screen and (max-width:480px)\" type=\"text/css\"> @media only screen and (max-width:480px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide], span[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_height]{height: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_font]{font-size: 14px !important; line-height: 28px !important;}td[class=em_font1]{font-size: 14px !important; line-height: 18px !important;}td[class=em_font2]{font-size: 14px !important; line-height: 18px !important; text-align: center !important;}td[class=em_space]{width: 10px !important;}span[class=em_br]{display: block !important;}td[class=em_width55]{width: 55px !important; font-size: 15px !important; line-height: 19px !important; text-align: center !important;}td[class=em_width75]{width: 75px !important; font-size: 15px !important; line-height: 19px !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style></head><body style=\"margin:0px; padding:0px;\" bgcolor=\"#ffffff\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#ffffff\"> <tbody><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#ffffff\"><table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"40\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:none;\"><img src=\"http://residencedeshautsdemenaye.fr/img/logoRHM.png\" width=\"390\" height=\"283\" style=\"display:block;font-family: Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; font-weight:bold;\" border=\"0\" alt=\"LoGo Here\"></a></td></tr><tr> <td height=\"30\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; text-transform:uppercase; font-weight:bold;\" class=\"em_font\"> <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">HOTEL</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">RESTAURANT</a> <span class=\"em_hide\"> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; </span> <span class=\"em_br\"> </span><a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">EVENTS</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">CONTACTEZ-NOUS</a> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"50\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"middle\" align=\"center\"><h1>NOUS VOUS REMERCIONS</h1></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:18px; font-weight:bold; line-height:22px; color:#33cc33; text-transform:uppercase;\">Pour votre réservation!</td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:22px; font-weight:bold; color:#30373b; text-transform:uppercase;\">Votre facture</td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"left\" class=\"em_wrapper\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Numéro de réservation </span>"+ bookingNum+" </td></tr></tbody></table> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"right\" class=\"em_wrapper\"> <tbody><tr> <td valign=\"top\" class=\"em_pad_top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Date de facturation</span>"+ facturationDate+" </td></tr></tbody></table> </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Client : &nbsp;<span style=\" color:#30373b;\">"+clientFullName+"</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"em_font2\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:20px; color:#30373b;\">"+ clientAddress+", "+clientCity+", "+clientCountry+" </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td width=\"30\" class=\"em_hide\">&nbsp;</td><td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Chambres</td><td width=\"5\"></td><td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Quantité</td><td width=\"138\" class=\"em_hide\"></td><td width=\"5\"></td><td align=\"right\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#eaebeb\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr>";

        String row = "<tr>\n" +
                "                                                <td valign=\"top\">\n" +
                "                                                    <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\">\n" +
                "                                                        <tbody><tr>\n" +
                "                                                            <td width=\"30\" class=\"em_hide\">&nbsp;</td>\n" +
                "                                                            <td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomType</td>\n" +
                "                                                            <td width=\"5\"></td>\n" +
                "                                                            <td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">quantity</td>\n" +
                "                                                            <td width=\"138\" class=\"em_hide\"></td>\n" +
                "                                                            <td width=\"5\"></td>\n" +
                "                                                            <td align=\"right\" valign=\"top\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">price</td>\n" +
                "                                                            <td width=\"30\" class=\"em_hide\">&nbsp;</td>\n" +
                "                                                        </tr>\n" +
                "                                                    </tbody></table>\n" +
                "                                                </td>\n" +
                "                                            </tr>";

        String down = "<tr> <td height=\"9\" class=\"em_hide\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#feae39\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"15\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td align=\"right\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:20px; line-height:24px; color:#30373b; font-weight:bold;\">Total: &nbsp;&nbsp; $Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"28\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:16px; line-height:22px; color:#30373b;\"> Feel free to review your invoice below or click the<br class=\"em_hide\"> button to view your account. </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> <table width=\"210\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td valign=\"middle\" align=\"center\" height=\"45\" bgcolor=\"#33cc33\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#ffffff; text-transform:uppercase;\"><a href=\"#\" target=\"_blank\" style=\"line-height:45px; display:block; color:#ffffff; text-decoration:none;\">My account</a></td></tr></tbody></table> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"middle\" align=\"center\" class=\"auto-style1\"> <h1><strong>Propositions de Loisirs</strong></h1> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:22px; font-weight:bold; color:#30373b;\"> Le Gabon est un pays composé de 9 provinces.<br>La Résidence des Hauts de Ménaye se situe à Menaye Epila dans la province du Hauts Ogooué.<br>Le Haut Ogooué possède plusieurs sites touristiques dont notre hôtel est pr&amp;êt à faire profiter ses clients. </td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Découvrez : &nbsp;<span style=\" color:#30373b;\">Le pont de Liane de poubara</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"http://img.over-blog-kiwi.com/0/81/72/74/ob_bb03d8_pont-lianes-2.jpg\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \"> Le pont de liane de Franceville est l'une des attractions les plus célèbre du Gabon.<br>Ce pont construit au dessus des rapides de poubara est pour la chance de vivre une expérience riche en frisson. </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Découvrez : &nbsp;<span style=\" color:#30373b;\">LeS chutes de poubara</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"http://img.over-blog-kiwi.com/0/81/72/74/ob_d6f93e_chutes-de-poubara-1.jpg\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \"> Les chutes de poubara font partie comme le pont de liane des attarctions touristique de poubara. <br>Vous pourrez partir en excursion à travers la forêt pour atteindre les chutes de poubara. </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Découvrez : &nbsp;<span style=\" color:#30373b;\">Le canyone de leconie</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img class=\"auto-style4\" src=\"http://tobo.astride.free.fr/images/canyondelaconi.jpg\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \"> Vous aurrez aussi la possibilité de visiter les canyons de Leconie.<br>Vous pourrez admirerer la vue qu'offre ce magnifique paysage. </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td align=\"center\" style=\"line-height:22px; \" class=\"auto-style7\">Pour effectuer toute visite, veuillez contacter l'hôtel dans le lien suivant en précisant quel site vous désirez visiter.</td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> <table width=\"210\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td valign=\"middle\" align=\"center\" height=\"45\" bgcolor=\"#33cc33\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#ffffff; text-transform:uppercase;\">CONTACT</td></tr></tbody></table> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#30373b\" class=\"em_aside\"> <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:12px; line-height:18px; color:#848789;text-transform:uppercase;\"> If you do not wish to receive any further emails from us, please <span style=\"text-decoration:underline;\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:underline; color:#848789;\">unsubscribe</a></span> </td></tr><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> <div style=\"display:none; white-space:nowrap; font:20px courier; color:#ffffff; background-color:#ffffff;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div></body></html>";

        String invoice;
        Set setA = new HashSet();
        double totalCount = 0;
        for (RoomCategory b : list) {
            String roomName = b.getName();
            double priceNight = b.getPrice();
            Long roomId = b.getId();
            int quantity = getOccurrenceRoomBooking(roomId, list);
            String toAdd = row;
            double total = quantity * priceNight;
            toAdd = replaceValueInText(toAdd, "roomType", roomName)
                    .replace("quantity", "" + quantity)
                    .replace("price", "" + total);
            setA.add(toAdd);
            totalCount = totalCount + total;
        }

        invoice = up + setA.toString() + down;
        invoice = formatInvoice(invoice,totalCount);
        return invoice;
    }

    public String getFacturation(String bookingNum, String facturationDate, String clientFullName, String clientAddress, String clientCity, String clientCountry, List<RoomCategory> listCateg) {

        String invoice;
        String up = "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head> <title>THANK YOU</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0 \"> <meta name=\"format-detection\" content=\"telephone=no\"> <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800\" rel=\"stylesheet\"> <style type=\"text/css\"> body{-webkit-text-size-adjust: 100% !important; -ms-text-size-adjust: 100% !important; -webkit-font-smoothing: antialiased !important;}img{border: 0 !important; outline: none !important;}p{Margin: 0px !important; Padding: 0px !important;}table{border-collapse: collapse; mso-table-lspace: 0px; mso-table-rspace: 0px;}td, a, span{border-collapse: collapse; mso-line-height-rule: exactly;}.ExternalClass *{line-height: 100%;}span.MsoHyperlink{mso-style-priority: 99; color: inherit;}span.MsoHyperlinkFollowed{mso-style-priority: 99; color: inherit;}.auto-style1{color: #33CC33;}.auto-style2{height: 157px;}.auto-style3{height: 99px;}.auto-style4{width: 100%;}.auto-style5{font-family: \"Open Sans\", Arial, sans-serif; font-size: 17px; color: #30373B;}.auto-style6{height: 154px; width: 93%;}.auto-style7{font-family: \"Open Sans\", Arial, sans-serif; font-size: 16px; color: #30373B;}</style> <style media=\"only screen and (min-width:481px) and (max-width:599px)\" type=\"text/css\"> @media only screen and (min-width:481px) and (max-width:599px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_height]{height: 20px !important;}td[class=em_space]{width: 10px !important;}td[class=em_width55]{width: 80px !important; text-align: center !important;}td[class=em_width75]{width: 100px !important;}td[class=em_font]{font-size: 14px !important;}td[class=em_font2]{text-align: center !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style> <style media=\"only screen and (max-width:480px)\" type=\"text/css\"> @media only screen and (max-width:480px){table[class=em_main_table]{width: 100% !important;}table[class=em_wrapper]{width: 100% !important;}td[class=em_hide], br[class=em_hide], span[class=em_hide]{display: none !important;}img[class=em_full_img]{width: 100% !important; height: auto !important;}td[class=em_align_cent]{text-align: center !important;}td[class=em_pad_top]{padding-top: 20px !important;}td[class=em_height]{height: 20px !important;}td[class=em_aside]{padding-left: 10px !important; padding-right: 10px !important;}td[class=em_font]{font-size: 14px !important; line-height: 28px !important;}td[class=em_font1]{font-size: 14px !important; line-height: 18px !important;}td[class=em_font2]{font-size: 14px !important; line-height: 18px !important; text-align: center !important;}td[class=em_space]{width: 10px !important;}span[class=em_br]{display: block !important;}td[class=em_width55]{width: 55px !important; font-size: 15px !important; line-height: 19px !important; text-align: center !important;}td[class=em_width75]{width: 75px !important; font-size: 15px !important; line-height: 19px !important;}td[class=em_align_cent1]{text-align: center !important; padding-bottom: 10px !important;}}</style></head><body style=\"margin:0px; padding:0px;\" bgcolor=\"#ffffff\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#ffffff\"> <tbody><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#ffffff\"> <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"40\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:none;\"><img src=\"https://residencedeshautsdemenaye.fr/img/logoRHM.png\" width=\"390\" height=\"283\" style=\"display:block;font-family: Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; font-weight:bold;\" border=\"0\" alt=\"LoGo Here\"></a></td></tr><tr> <td height=\"30\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:15px; line-height:18px; color:#30373b; text-transform:uppercase; font-weight:bold;\" class=\"em_font\"> <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">HOTEL</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">RESTAURANT</a> <span class=\"em_hide\"> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; </span> <span class=\"em_br\"> </span><a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">EVENTS</a> &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; <a href=\"#\" target=\"_blank\" style=\"text-decoration:none; color:#30373b;\">CONTACTEZ-NOUS</a> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#fed69c\" style=\"font-size:0px; line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" style=\"display:block;\" border=\"0\" alt=\"\"></td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"50\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"middle\" align=\"center\"><h1>NOUS VOUS REMERCIONS</h1></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:18px; font-weight:bold; line-height:22px; color:#33cc33; text-transform:uppercase;\"></td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:22px; font-weight:bold; color:#30373b; text-transform:uppercase;\"></td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"left\" class=\"em_wrapper\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Numéro de réservation</span> " + bookingNum + " </td></tr></tbody></table> <table width=\"290\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"right\" class=\"em_wrapper\"> <tbody><tr> <td valign=\"top\" class=\"em_pad_top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td align=\"center\" valign=\"middle\" class=\"em_font1\" height=\"42\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#30373b; text-transform:uppercase;\"> <span style=\"color:#33cc33;\">Date de facturation</span> " + facturationDate + " </td></tr></tbody></table> </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Client : &nbsp;<span style=\" color:#30373b;\">" + clientFullName + "</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"em_font2\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px;line-height:20px; color:#30373b;\"> " + clientAddress + " , " + clientCity + ", " + clientCountry + " . </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td width=\"30\" class=\"em_hide\">&nbsp;</td><td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Chambres</td><td width=\"5\"></td><td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Quantité</td><td width=\"138\" class=\"em_hide\"></td><td width=\"5\"></td><td align=\"right\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b; font-weight:bold;\">Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#eaebeb\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr>";

        String row = "<tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td width=\"30\" class=\"em_hide\">&nbsp;</td><td width=\"255\" valign=\"top\" align=\"left\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomType</td><td width=\"5\"></td><td width=\"35\" class=\"em_width55\" valign=\"top\" align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomCount</td><td width=\"138\" class=\"em_hide\"></td><td width=\"5\"></td><td align=\"right\" valign=\"top\" class=\"em_width75\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:24px; color:#30373b;\">roomTotalPrice</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr>";

        String down = "<tr> <td height=\"8\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"9\" class=\"em_hide\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#feae39\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"15\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td align=\"right\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:20px; line-height:24px; color:#30373b; font-weight:bold;\">Total: &nbsp;&nbsp; $Total</td><td width=\"30\" class=\"em_hide\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"28\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:16px; line-height:22px; color:#30373b;\"></td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td valign=\"top\" class=\"em_aside\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td valign=\"middle\" align=\"center\" class=\"auto-style1\"> <h1><strong>Informations pour les professionnel</strong>s</h1> </td></tr><tr> <td height=\"14\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td height=\"1\" bgcolor=\"#d6d7d8\" style=\"font-size:0px;line-height:0px;\"><img src=\"https://www.sendwithus.com/assets/img/emailmonks/images/spacer.gif\" width=\"1\" height=\"1\" alt=\"\" style=\"display:block;\" border=\"0\"></td></tr><tr> <td height=\"27\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\" style=\"line-height:22px; \" class=\"auto-style8\">La Résidence des Hauts de Menaye est à l'écoute de vos moindre besoin, n'hésitez pas à nous contacter pour la moindre information ou remarque.</td></tr><tr> <td height=\"23\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td height=\"20\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Information : &nbsp;<span style=\" color:#30373b;\">Une connexion internet</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0q272_RLW9q4WhkbqMlgTGLdCFUfPNHVhzvi2w9FNY9BZh-RhSAHxdQ\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \"> La Résidence des Hauts de Menaye est équipé de connexion Wi-Fi accessible dans tout l'hôtel. Vous pouvez donc vous présenter à l'accueil pour demander à avoir accès au Wi-fi. </td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#f6f7f8\" class=\"auto-style2\"> <tbody><tr> <td width=\"25\" class=\"em_space\">&nbsp;</td><td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"> <tbody><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" valign=\"top\" class=\"em_font1\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; line-height:20px; font-weight:bold; color:#33cc33; text-transform:uppercase;\">Information : &nbsp;<span style=\" color:#30373b;\">Vos déplacements</span></td></tr><tr> <td valign=\"top\"> <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style3\"> <tbody><tr> <td align=\"left\" width=\"180\" class=\"em_hide\"> <img src=\"http://images.clipartlogo.com/files/images/17/174558/aiga-ground-transportation-bg_t\" class=\"auto-style4\"> </td><td valign=\"top\"> <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"auto-style6\"> <tbody><tr> <td height=\"10\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td align=\"left\" class=\"auto-style5\" style=\"line-height:20px; \">Si vous souhaitez vous déplacer, seul ou en groupe, la Résidence des Hauts de Menaye pourra mettre à votre disposition un taxi ou un bus pour assurer vos déplacements dans la ville.</td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr></tbody></table> </td><td width=\"25\" class=\"em_space\">&nbsp;</td></tr></tbody></table> </td></tr><tr> <td height=\"25\" class=\"em_height\">&nbsp;</td></tr><tr> <td valign=\"top\"></td></tr><tr> <td align=\"center\" style=\"line-height:22px; \" class=\"auto-style7\">En cas de déplacements importants, nous vous conseillons de contacter l'hôtel à l'avance et de préciser le nombre de personnes qui se dépalceront avec vous afin que nous puissions prendre nos dispositions.</td></tr><tr> <td height=\"12\" style=\"font-size:1px; line-height:1px;\">&nbsp;</td></tr><tr> <td valign=\"top\" align=\"center\"> <table width=\"210\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"> <tbody><tr> <td valign=\"middle\" align=\"center\" height=\"45\" bgcolor=\"#feae39\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:17px; font-weight:bold; color:#ffffff; text-transform:uppercase;\">CONTACT</td></tr></tbody></table> </td></tr><tr> <td height=\"31\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> </td></tr><tr> <td align=\"center\" valign=\"top\" bgcolor=\"#30373b\" class=\"em_aside\"> <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"em_main_table\" style=\"table-layout:fixed;\"> <tbody><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr><tr> <td align=\"center\" style=\"font-family:'Open Sans', Arial, sans-serif; font-size:12px; line-height:18px; color:#848789;text-transform:uppercase;\"> If you do not wish to receive any further emails from us, please <span style=\"text-decoration:underline;\"><a href=\"#\" target=\"_blank\" style=\"text-decoration:underline; color:#848789;\">unsubscribe</a></span> </td></tr><tr> <td height=\"35\" class=\"em_height\">&nbsp;</td></tr></tbody></table> </td></tr></tbody></table> <div style=\"display:none; white-space:nowrap; font:20px courier; color:#ffffff; background-color:#ffffff;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div></body></html>";

        Set setA = new HashSet();
        double totalCount = 0;
        //ici on ajoute les infos de chambre*
        for (RoomCategory b : listCateg) {
            String roomName = b.getName();
            double priceNight = b.getPrice();
            Long roomId = b.getId();
            int quantity = getOccurrenceRoomBooking(roomId, listCateg);
            String toAdd = row;
            double total = quantity * priceNight;
            toAdd = replaceValueInText(toAdd, "roomType", roomName)
                    .replace("roomCount", "" + quantity)
                    .replace("roomTotalPrice", "" + total);
            setA.add(toAdd);
            totalCount = totalCount + total;
        }
        invoice = up + setA.toString() + down;
        invoice = formatInvoice(invoice,totalCount);
        return invoice;
    }

    private String formatInvoice(String invoice,double totalCount){
        return invoice.replace("$Total", "" + totalCount)
                .replace("é", "&eacute;")
                .replace("ê", "&ecirc;")
                .replace("ô", "&ocirc;")
                .replace("à", "&agrave;")
                .replace("\n" +"\n" +"[ \n" +"\n" +"] ", "");
    }

    private String replaceValueInText(String content, String oldValue, String newValue) {
        String value = content.replace(oldValue, newValue);
        return value;
    }



    public int getOccurrenceRoomBooking(Long roomId, List<RoomCategory> list) {
        int count = 0;
        for (int i = 0; i < list.size(); i++) {
            if (Objects.equals(list.get(i).getId(), roomId)) {
                count++;
            }
        }
        return count;
    }

}
